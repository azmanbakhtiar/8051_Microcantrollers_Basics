
#include<reg51.h>


sbit A=P2^4;
sbit b=P2^3;
sbit C=P2^2;

sbit r1=P1^0;
sbit r2=P1^1;
sbit r3=P1^2;
sbit r4=P1^3;
sbit c1=P1^4;
sbit c2=P1^5;
sbit c3=P1^6;
sbit c4=P1^7;

unsigned int message[] = {0x3f,0x06,0x5B,0x4F,0x66,0x6D,0x7D,0x07,0x7F,0x67,};

void lcd_init();
void cmd(unsigned char );
void dat(unsigned char );
lcd_string(unsigned char *);
void delay(unsigned int );
void keypad(void);
void main()
{
	while(1)
	{
A=1;b=0;C=1;
	keypad();	
	}
}
void keypad()
{
    c1=c2=c3=c4=1;
    r1=0;r2=1;r3=1;r4=1;
    if(c1==0){
        while(c1==0);
        P0=0x3f ;
    } else if(c2==0) {
        while(c2==0);
         P0=0x06;
    } else if(c3==0) {
        while(c3==0);
         P0=0x5B ;
    } else if(c4==0) {
        while(c4==0);
         P0=0x4F ;
    }
    r1=1;r2=0;r3=1;r4=1;
    if(c1==0){
        while(c1==0);
        P0=0x66 ;
    } else if(c2==0) {
        while(c2==0);
         P0=0x6D ;
    } else if(c3==0) {
        while(c3==0);
         P0=0x7D ;
    } else if(c4==0) {
        while(c4==0);
         P0=0x07 ;
    }
    r1=1;r2=1;r3=0;r4=1;
    if(c1==0){
        while(c1==0);
        P0=0x7F;
    } else if(c2==0) {
        while(c2==0);
         P0=0x6F ;
    } else if(c3==0) {
        while(c3==0);
        P0=0x77 ;
    } else if(c4==0) {
        while(c4==0);
         P0=message[0] ;
    }
    r1=1;r2=1;r3=1;r4=0;
    if(c1==0){
        while(c1==0);
         P0=0x7C;
    } else if(c2==0) {
        while(c2==0);
        P0=0x39 ;
    } else if(c3==0) {
        while(c3==0);
         P0=0x5E ;
    } else if(c4==0) {
        while(c4==0);
         P0=0x79 ;
    }
}


void delay(unsigned int z)
{
  unsigned int i;
  for(i=0;i<=z;i++);
}